<!doctype html>
<!-- Author: Stepan Tesar, Pavlidis Lab - UBC -->
<html class="no-js" lang="" xmlns:v-on="http://www.w3.org/1999/xhtml" xmlns:v-bind="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Gemma REST API interactive documentation</title>

        <meta name="description"
              content="This website documents the usage of the Gemma REST API.
              Here you can find example script usage of the API, as well as graphical
              interface for each endpoint, with description of its parameters and the endpoint URL"
        >
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="copyright" content="University of British Columbia">

        <link rel="manifest" href="site.webmanifest">
        <link rel="apple-touch-icon" href="favicon-96x96.png">

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/bootstrap-theme.css">
        <link rel="stylesheet" href="css/prettify.css">
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>

        <header>
            <!--[if lte IE 9]>
            <div class="modal-header browser-upgrade">
                <p>
                    You are using an <strong>outdated</strong> browser.
                    Please <a href="https://browsehappy.com/">upgrade your browser</a>
                    to improve your experience and security.
                </p>
            </div>
            <![endif]-->

            <div class="jumbotron">
                <div class="container">
                    <h1>Gemma REST&#160;API interactive <span style="display:inline-block">documen&shy;tation</span>
                    </h1>
                </div>
            </div>
        </header>

        <div id="main-content">

            <div class="welcome">
                <div class="container">
                    <h2>Welcome</h2>
                    <p>This website documents the usage of the <a href="http://gemma.msl.ubc.ca/rest/v2/"
                                                                  target="_blank">Gemma REST API</a>. Here
                        you can find example script usage of the API, as well as graphical interface for each
                        endpoint, with description of its parameters and the endpoint URL.</p>
                    <p>The documentation of the underlying java code can be found <a
                        href="http://gemma.msl.ubc.ca/resources/apidocs/ubic/gemma/web/services/rest/package-summary.html">here</a>.
                        See the <a href="#footer">links section</a> in the footer of this page for other relevant links.
                    </p>
                    <div class="alert alert-warning">
                        <p>Use of this webpage and Gemma web services, including the REST API, is subject to
                            <a href="https://pavlidislab.github.io/Gemma/terms.html">these terms and conditions.</a>
                            Please read these in full before continuing to use this webpage or any other part of the
                            Gemma system.
                        </p>
                    </div>
                </div>
            </div>

            <div class="updates">
                <div class="container updates-new">
                    <h2>Updates</h2>

                    <div>
                        <h3>Update 2.2.6</h3>
                        <span class="date">June 7th, 2018</span>
                        <p>
                            Code maintenance, bug fixes. Geeq scores stable and made public.
                        </p>
                        <p>
                            June 7th [2.2.6] Added: User authentication endpoint.
                        </p>
                        <p>
                            May 2nd [2.2.5] Fixed: Cleaned up and optimized platforms/elements endpoint, removed
                            redundant information (recursive properties nesting).
                        </p>
                        <p>
                            April 12th [2.2.3] Fixed: Array arguments not handling non-string properties properly, e.g.
                            ncbiIds of genes.
                        </p>
                        <p>
                            April 9th [2.2.1] Fixed: Filter argument not working when the filtered field was a primitive
                            type. This most
                            significantly allows filtering by geeq boolean and double properties.
                        </p>
                    </div>

                    <hr>

                    <div>
                        <h3>Update 2.2.0</h3>
                        <span class="date">February 8th, 2018</span>
                        <p>
                            Breaking change in the 'Dataset differential analysis' endpoint:
                        </p>
                        <ul>
                            <li>No longer using qValueThreshold parameter</li>
                            <li>Response format changed, now using
                                <a href="https://gemma.msl.ubc.ca/resources/apidocs/ubic/gemma/model/analysis/expression/diff/DifferentialExpressionAnalysisValueObject.html">
                                    DifferentialExpressionAnalysisValueObject
                                </a> instead of <a
                                    href="https://gemma.msl.ubc.ca/resources/apidocs/ubic/gemma/model/analysis/expression/diff/DifferentialExpressionValueObject.html">
                                    DifferentialExpressionValueObject
                                </a>
                            </li>
                        </ul>
                        <p>
                            [Experimental] Added Geeq (Gene Expression Experiment Quality) scores to the dataset value
                            objects
                        </p>
                    </div>

                    <hr>

                </div>

                <div class="older-updates-button" v-on:click=" showOlderUpdates = !showOlderUpdates"
                     title="Click for older updates">
                    <span
                        v-bind:class="[showOlderUpdates ? 'glyphicon-chevron-up' : 'glyphicon-chevron-down', 'glyphicon']"></span>
                </div>

                <div class="container updates-old" v-show="showOlderUpdates">

                    <!-- Move older updates to this section -->
                    <div>
                        <h3>Update 2.1.1</h3>
                        <span class="date">December 5th, 2017</span>
                        <p>
                            Added the 'Dataset SVD Information' Endpoint.
                        </p>
                    </div>

                    <hr>

                    <div>
                        <h3>Update 2.1.0 (Public stable release)</h3>
                        <span class="date">November 28th, 2017</span>
                        <p>
                            Breaking change in all endpoints that use the
                            <a href="https://gemma.msl.ubc.ca/resources/apidocs/index.html?ubic/gemma/model/expression/bioAssayData/ExperimentExpressionLevelsValueObject.html">ExpressionExperimentValueObject</a>
                            in the response (mainly Datasets, Dataset search, Platforms datasets). The structure of the
                            value object has changed - removed unused properties (moved to
                            ExpressionExperimentDetailsValueObject, which not used in the API)
                        </p>

                        <p>
                            Breaking changes in 'Dataset genes expression levels' endpoint:
                        </p>
                        <ul>
                            <li>Added 'consolidate' parameter</li>
                            <li>Structure of the
                                <a href="https://gemma.msl.ubc.ca/resources/apidocs/ubic/gemma/model/expression/bioAssayData/ExperimentExpressionLevelsValueObject.html">
                                    ExperimentExpressionLevelsValueObject
                                </a>, that is used in the response, has changed.
                            </li>
                        </ul>

                        <p>
                            Added Basic Authentication.
                        </p>
                        <p>
                            Fixed: The 'Short Name' identifier for datasets not allowing hyphens.
                        </p>
                    </div>

                    <hr>
                    <p>Versions prior to this release were considered experimental (beta - minor version not bumped on
                        breaking changes).</p>
                    <hr>

                    <div>
                        <h3>Update 2.0.5</h3>
                        <span class="date">November 28th, 2017</span>
                        <p>
                            Fixed: gene coexpression endpoint not working.
                        </p>
                        <p>
                            Fixed: Multiple ontology term URIs not being parsed properly in search endpoints.
                        </p>
                        <p>
                            Fixed: Problems when some parameters contained unescaped forward slashes
                        </p>
                        <p>
                            Fixed: Taxon array arguments not working if the first identifier was not found.
                        </p>
                        <p>
                            Fixed: NPEs on various occasions.
                        </p>
                    </div>

                    <hr>

                    <div>
                        <h3>Update 2.0.4</h3>
                        <span class="date">October 30th, 2017</span>
                        <p>
                            Breaking change: Use FactorValueBasicValueObject in 'Dataset samples' endpoint.
                        </p>
                        <p>
                            Added 'Datasets genes expression levels' endpoint.
                        </p>
                        <p>
                            Added 'Datasets pca component expression levels' endpoint.
                        </p>
                        <p>
                            Added 'Datasets differential expression levels' endpoint.
                        </p>
                        <p>
                            Improved unrecognized identifier error message.
                        </p>
                    </div>

                    <hr>

                    <div>
                        <h3>Update 2.0.3</h3>
                        <span class="date">October 18th, 2017</span>
                        <p>
                            Breaking change: Removed 'specific x' endpoints - replaced with 'all x' endpoints using
                            array arguments.
                        </p>
                        <p>
                            Breaking change: Add array arguments to 'Platform elements' and 'Genes' endpoints.
                        </p>
                        <p>
                            Breaking change: Change 'Dataset search' endpoint URI to use 'datasets' instead of
                            'experiments'
                        </p>
                        <p>
                            Fixed: limit 0 causing 0 results instead of not limiting the response size in some
                            endpoints.
                        </p>
                    </div>

                    <hr>

                    <div>
                        <h3>Update 2.0.2</h3>
                        <span class="date">October 18th, 2017</span>
                        <p>
                            Breaking change: Add array arguments, add listed datasets endpoint.
                        </p>
                        <p>
                            Added NCBI ID as a possible Taxon identifier.
                        </p>
                        <p>
                            Added optional tree parameter to the 'Taxon phenotypes' endpoint.
                        </p>
                        <p>
                            Added 'Taxon phenotypes candidate genes' endpoint.
                        </p>
                    </div>

                    <hr>

                    <div>
                        <h3>Update 2.0.1</h3>
                        <span class="date">September 22nd, 2017</span>
                        <p>
                            Fixed: Various NPEs and small problems.
                        </p>
                    </div>

                    <hr>

                    <div>
                        <h3>Update 2.0-Beta</h3>
                        <span class="date">August 16th, 2017</span>
                        <p>
                            Public beta release.
                        </p>
                    </div>
                </div>
            </div>

            <div class="code-samples">
                <div class="container">
                    <h2>Code samples</h2>
                    <p>Examples of the API usage in scripts.</p>
                </div>

                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="panel panel-default code-panel">
                                <div class="panel-heading">
                                    R
                                </div>
                                <div class="panel-body">
                                <pre class="prettyprint code-sample">
                                    {{ rExample }}
                                </pre>
                                </div>
                            </div>
                            <div class="container-fluid">
                                <h3>R package</h3>
                                <p>For the R language, it is best to use <a target="_blank"
                                                                            href="https://github.com/PavlidisLab/gemmaAPI.R">
                                    the gemmaAPI.R wrapper package <i class="glyphicon glyphicon-share"></i></a>.
                                    Please follow the link for documentation on how to use it.
                                    The above code example is connecting directly to the API without the use of the
                                    package.
                                </p>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="panel panel-default code-panel">
                                <div class="panel-heading">
                                    Python
                                </div>
                                <div class="panel-body">
                                <pre class="prettyprint code-sample">
                                    {{ pythonExample }}
                                </pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="container">

                </div>

            </div>

            <div class="endpoints">

                <div class="container">
                    <h2>API Endpoints</h2>
                    <p>Below is a list of all API endpoints, with a GUI for test calls.</p>
                    <p>Click on the endpoint category to expand it, and then on each endpoint name to see its interface
                        and parameters.</p>
                    <p>
                        To display information about any parameter, click the
                        <button class="btn btn-info"><span class="glyphicon glyphicon-info-sign"></span></button>
                        button next to the parameter field.
                    </p>

                    <h3>Response format</h3>
                    <p>The default format of the response is JSON. Some endpoints return text files or tar.gz
                        archives - Your browser or pop up blockers might prevent these files from being downloaded,
                        make sure you <b>allow pop ups</b> on this webpage.</p>
                    <p>For successful api calls, the reply will have a root element <code>data</code> containing all
                        retrieved information wrapped in endpoint-specific objects, and if there was an error, the
                        response will have an
                        <code>apiVersion</code> element and <code>error</code> element, that will contain
                        <code>code</code>,<code> message</code> and <code>errors</code> sub-elements.
                        The <code>errors</code> sub-element may contain details about the exception that occured.
                    </p>
                    <p>Should you receive a <code>500 class error</code> (any error code starting with the number 5)
                        indicating a server problem, we kindly ask you to
                        <a href="#contact">contact us</a> and provide the api call url you used when you received the
                        error, and the response.</p>
                    <p>To display endpoint-specific information about the response, click the
                        <button class="btn-response-desc-mock">
                            <span class="glyphicon glyphicon-info-sign"></span>
                            Show response description
                        </button>
                        button under the 'response' subtitle.
                    </p>

                    <h3>Authentication</h3>
                    <p>The REST API accepts <a href="https://tools.ietf.org/html/rfc2617#section-2" target="_blank">HTTP
                        Basic Authentication</a>. A base64 encoded string containing your password
                        and username is sent in the request headers with each api call over a secure https protocol.</p>
                    <!--TODO uncomment when auth/admin endpoints exposed-->
                    <p>Endpoints that require authorized access are marked with <span
                        class="access-auth glyphicon glyphicon-minus-sign"></span> icon </p>
                    <!--<p>Endpoints only accessible with an admin account are marked with <span-->
                    <!--class="access-admin glyphicon glyphicon-minus-sign"></span> icon </p>-->
                    <p>If no credentials are provided, anonymous access is granted for all GET methods (Any data
                        retrieval). Anonymous access may cause some of the endpoints to filter out results that require
                        authorized access (E.g. experiments and platforms that are marked as unusable or private).
                    </p>

                    <div class="param-row">
                        <label hidden for="authUser">Gemma username</label>
                        <div class="input-group has-warning" title="username">
                            <span class="input-group-addon">Username = </span>
                            <!--suppress HtmlFormInputWithoutLabel -->
                            <input id="authUser" class="form-control" v-model="authUser"
                                   v-on:keypress.enter.prevent=""
                            >
                            <span class="input-group-btn">
                                <button class="btn btn-info" v-on:click=" showUserInfo = !showUserInfo ">
                                    <span class="glyphicon glyphicon-info-sign"></span>
                                </button>
                            </span>
                        </div>
                        <div class="pre-like" v-if="showUserInfo">
                            Your gemma username. If you need to create a new Gemma account, please go to the
                            <a href="https://gemma.msl.ubc.ca">Gemma website</a> and register (click 'Log in' in the
                            upper right corner, to show the login window, then click the 'Need an account? Register'
                            button).
                        </div>
                    </div>

                    <div class="param-row">
                        <label hidden for="authPass">Gemma username</label>
                        <div class="input-group has-warning" title="password">
                            <span class="input-group-addon">Password = </span>
                            <!--suppress HtmlFormInputWithoutLabel -->
                            <input v-bind:type="showPass ? 'text' : 'password' " id="authPass" class="form-control"
                                   v-model="authPass"
                                   v-on:keypress.enter.prevent=""
                            >
                            <span class="input-group-btn">
                                <button class="btn btn-info" v-on:click=" showPass = !showPass ">
                                    <span v-bind:class="showPass ? 'glyphicon-eye-close' : 'glyphicon-eye-open'"
                                          class="glyphicon"></span>
                                </button>
                                <button class="btn btn-info" v-on:click=" showPassInfo = !showPassInfo ">
                                    <span class="glyphicon glyphicon-info-sign"></span>
                                </button>
                            </span>
                        </div>
                        <div class="pre-like" v-if="showPassInfo">
                            Your gemma password. If you forgot your password, you can reset it through the
                            <a href="https://gemma.msl.ubc.ca">Gemma website</a> (click 'Log in' in the upper right
                            corner, to show the login window, then click the 'Forgot your password' link).
                        </div>
                    </div>


                    <endpoint :name="'Test login'"
                              :description="'Checks that the provided login info is correct. This is done by first checking the basic http authentication info, and then
                              passing the username nad password hash as parameters to the endpoint to retrieve the user information. The endpoint will return a null response
                              if the basic auth. and url parameters do not match the same user.'"
                              :response-description="'Successful response will contain the logged in users info.'"
                              :query-params="[getPHashParam()]"
                              :path-params="[getUNameParam()]"
                              :endpoint-url-base="'users/%%%1'"
                              :auth-access="true"
                              :hide-params="true">
                    </endpoint>

                    <div class="alert alert-warning">
                        <p>If you provide credentials that are invalid, all calls will return a '401 - Unauthorized'
                            error, even if they allow anonymous access.</p>
                        <p>Using this website, some browsers might prompt you for credentials again, if this form
                            contains invalid ones.</p>
                        <p>Make sure to test your credentials before bulk queries, e.g. by calling the root
                            endpoint.</p>
                    </div>

                </div>

                <endpoint :name="'Root endpoint'"
                          :description="'Displays a welcome message'"
                          :response-description="'A special object containing a welcome message, API version and a link to this documentation.'"
                          :query-params="[]"
                          :path-params="[]"
                          :endpoint-url-base="''">
                </endpoint>

                <hr>

                <!--
                    Dataset endpoints
                 -->

                <div class="container endpoints-group-title" v-on:click=" showDatasets = !showDatasets">
                <span
                    v-bind:class="[showDatasets ? 'glyphicon-collapse-up' : 'glyphicon-collapse-down', 'glyphicon']"></span>
                    <h3>Dataset endpoints</h3>
                    <p>Endpoints accessing datasets (i.e. expression experiments), and their associated properties and
                        files</p>
                </div>

                <div id="datasetEndpoints" v-show="showDatasets">

                    <endpoint :name="'Datasets'"
                              :description="'Lists datasets filtered and organized by given parameters'"
                              :response-description="RDAllDatasets"
                              :query-params="getDatasetsAllQueryParams()"
                              :path-params="[getDatasetsParam()]"
                              :endpoint-url-base="'datasets/%%%1'">
                    </endpoint>

                    <endpoint :name="'Dataset search'"
                              :description="'Does a search for datasets containing annotations matching the given string'"
                              :response-description="RDDatasetSearch"
                              :query-params="[]"
                              :path-params="[getSearchParam()]"
                              :endpoint-url-base="'annotations/search/%%%1/datasets'">
                    </endpoint>

                    <endpoint :name="'Dataset platforms'"
                              :description="'Retrieves platforms for the given dataset'"
                              :response-description="RDDatasetsPlatforms"
                              :query-params="[]"
                              :path-params="[getDatasetParam()]"
                              :endpoint-url-base="'datasets/%%%1/platforms'">
                    </endpoint>

                    <endpoint :name="'Dataset samples'"
                              :description="'Retrieves samples for the given dataset'"
                              :response-description="RDDatasetsSamples"
                              :query-params="[]"
                              :path-params="[getDatasetParam()]"
                              :endpoint-url-base="'datasets/%%%1/samples'">
                    </endpoint>

                    <endpoint :name="'Dataset differential analysis'"
                              :response-description="RDDatasetsDiffEx"
                              :description="'Retrieves the differential analysis results for the given dataset'"
                              :query-params="getDatasetsDiffAnalQueryParams()"
                              :path-params="[getDatasetParam()]"
                              :endpoint-url-base="'datasets/%%%1/analyses/differential'">
                    </endpoint>

                    <endpoint :name="'Dataset SVD information'"
                              :response-description="RDDatasetsSVD"
                              :description="'Retrieves the SVD information for the given dataset'"
                              :query-params="[]"
                              :path-params="[getDatasetParam()]"
                              :endpoint-url-base="'datasets/%%%1/svd'">
                    </endpoint>

                    <endpoint :name="'Dataset annotations'"
                              :description="'Retrieves the annotations for the given dataset'"
                              :response-description="RDDatasetsAnnots"
                              :query-params="[]"
                              :path-params="[getDatasetParam()]"
                              :endpoint-url-base="'datasets/%%%1/annotations'">
                    </endpoint>

                    <endpoint :name="'Dataset data'"
                              :description="'Retrieves the data for the given dataset'"
                              :response-description="RDDatasetsData"
                              :query-params="getDatasetsDataQueryParams()"
                              :path-params="[getDatasetParam()]"
                              :endpoint-url-base="'datasets/%%%1/data'"
                              :json-response="false">
                    </endpoint>

                    <endpoint :name="'Dataset design'"
                              :description="'Retrieves the design for the given dataset'"
                              :response-description="RDDatasetsDesign"
                              :query-params="[]"
                              :path-params="[getDatasetParam()]"
                              :endpoint-url-base="'datasets/%%%1/design'"
                              :json-response="false">
                    </endpoint>

                    <endpoint :name="'Datasets genes expression levels'"
                              :description="'Retrieves the expression levels of given genes for given datasets'"
                              :response-description="RDDatasetsGeneExp"
                              :query-params="[getDatasetsExpressSpecParam(),getConsolidateParam()]"
                              :path-params="[getDatasetsExpressParam(),getGenesExpressParam()]"
                              :endpoint-url-base="'datasets/%%%1/expressions/genes/%%%2'">
                    </endpoint>

                    <endpoint :name="'Datasets pca component expression levels'"
                              :description="'Retrieves the expression levels most correlated with the given principal component'"
                              :response-description="RDDatasetsPcaExp"
                              :query-params="[getPcaComponentParam(),getExpressLimitParam(),getDatasetsExpressSpecParam(),getConsolidateParam()]"
                              :path-params="[getDatasetsExpressParam()]"
                              :endpoint-url-base="'datasets/%%%1/expressions/pca'">
                    </endpoint>

                    <endpoint :name="'Datasets differential expression levels'"
                              :description="'Retrieves differential expression levels for given datasets'"
                              :response-description="RDDatasetsDiffExp"
                              :query-params="[getDiffExSetParam(),getThresholdParam(),getExpressLimitParam(),getConsolidateParam()]"
                              :path-params="[getDatasetsExpressParam(),getDatasetsExpressSpecParam()]"
                              :endpoint-url-base="'datasets/%%%1/expressions/differential'">
                    </endpoint>

                    <div class="row-pad"></div>

                </div>

                <hr>

                <!--
                    Platform endpoints
                 -->

                <div class="container endpoints-group-title" v-on:click=" showPlatforms = !showPlatforms">
                <span
                    v-bind:class="[showPlatforms ? 'glyphicon-collapse-up' : 'glyphicon-collapse-down', 'glyphicon']"></span>
                    <h3>Platform endpoints</h3>
                    <p>Endpoints accessing platforms, and their associated properties and files</p>
                </div>

                <div id="platformEndpoints" v-show="showPlatforms">

                    <endpoint :name="'Platforms'"
                              :description="'List platforms filtered and organized by given parameters'"
                              :response-description="RDAll"
                              :query-params="getDatasetsAllQueryParams()"
                              :path-params="[getPlatformsParam()]"
                              :endpoint-url-base="'platforms/%%%1'">
                    </endpoint>

                    <endpoint :name="'Platform datasets'"
                              :description="'Retrieves experiments in the given platform'"
                              :response-description="RDPlatformsDatasets"
                              :query-params="getOffsetLimitQueryParams()"
                              :path-params="[getPlatformParam()]"
                              :endpoint-url-base="'platforms/%%%1/datasets/'">
                    </endpoint>

                    <endpoint :name="'Platform elements'"
                              :description="'Retrieves the composite sequences (elements) for the given platform'"
                              :response-description="RDPlatformsElements"
                              :query-params="getOffsetLimitQueryParams()"
                              :path-params="[getPlatformParam(),getProbesParam()]"
                              :endpoint-url-base="'platforms/%%%1/elements/%%%2'">
                    </endpoint>

                    <endpoint :name="'Platform element genes'"
                              :description="'Retrieves the genes on the given platform element'"
                              :response-description="RDPlatformsElementsGenes"
                              :query-params="getOffsetLimitQueryParams()"
                              :path-params="getPlatformsElementPathParams()"
                              :endpoint-url-base="'platforms/%%%1/elements/%%%2/genes/'">
                    </endpoint>

                    <endpoint :name="'Platform annotations'"
                              :description="'Retrieves the annotation file for the given platform'"
                              :response-description="RDPlatformsAnnots"
                              :query-params="[]"
                              :path-params="[getPlatformAnnotParam()]"
                              :endpoint-url-base="'platforms/%%%1/annotations/'"
                              :json-response="false">
                    </endpoint>

                    <div class="row-pad"></div>

                </div>

                <hr>

                <!--
                    Gene endpoints
                 -->

                <div class="container endpoints-group-title" v-on:click=" showGenes = !showGenes">
                <span
                    v-bind:class="[showGenes ? 'glyphicon-collapse-up' : 'glyphicon-collapse-down', 'glyphicon']"></span>
                    <h3>Gene endpoints</h3>
                    <p>Endpoints accessing genes (non taxon-specific). Most endpoints also have a
                        taxon-specific counterpart in the 'Taxon endpoints'.</p>
                </div>

                <div id="geneEndpoints" v-show="showGenes">

                    <div class="container">
                        <div class="alert alert-warning">
                            Please be aware that the 'Official symbol' identifier of a gene refers to a set of
                            gene homologues.
                            Using the official symbol as a gene parameter for these endpoints will yield an arbitrary
                            homologue (likely the same one every time, but that is not guaranteed).
                            Use the methods from the 'Taxon endpoints' if you want to use the official symbol for a
                            specific
                            homologue.
                        </div>
                    </div>

                    <endpoint :name="'Genes'"
                              :description="'Retrieves all genes matching the identifiers'"
                              :response-description="RDGenesAll"
                              :query-params="[]"
                              :path-params="[getGenesParam()]"
                              :endpoint-url-base="'genes/%%%1'">
                    </endpoint>

                    <endpoint :name="'Gene evidence'"
                              :description="'Retrieves gene evidence for the given gene'"
                              :response-description="RDGenesEvidence"
                              :query-params="[]"
                              :path-params="[getGeneParam()]"
                              :endpoint-url-base="'genes/%%%1/evidence'">
                    </endpoint>

                    <endpoint :name="'Gene locations'"
                              :description="'Retrieves the physical location of the given gene'"
                              :response-description="RDGenesLocation"
                              :query-params="[]"
                              :path-params="[getGeneParam()]"
                              :endpoint-url-base="'genes/%%%1/locations'">
                    </endpoint>

                    <endpoint :name="'Gene probes'"
                              :description="'Retrieves the probes (composite sequences) with this gene'"
                              :response-description="RDGenesProbes"
                              :query-params="getOffsetLimitQueryParams()"
                              :path-params="[getGeneParam()]"
                              :endpoint-url-base="'genes/%%%1/probes'">
                    </endpoint>

                    <endpoint :name="'Gene goTerms'"
                              :description="'Retrieves the GO terms of the given gene'"
                              :response-description="RDGenesGo"
                              :query-params="[]"
                              :path-params="[getGeneParam()]"
                              :endpoint-url-base="'genes/%%%1/goTerms'">
                    </endpoint>

                    <endpoint :name="'Gene coexpression'"
                              :description="'Retrieves the coexpression of two given genes'"
                              :response-description="RDGenesCoexp"
                              :query-params="getGeneCoexpQueryParams()"
                              :path-params="[getGeneParam()]"
                              :endpoint-url-base="'genes/%%%1/coexpression'">
                    </endpoint>

                    <div class="row-pad"></div>

                </div>

                <hr>

                <!--
                    Taxon endpoints
                 -->

                <div class="container endpoints-group-title" v-on:click=" showTaxa = !showTaxa">
                <span
                    v-bind:class="[showTaxa ? 'glyphicon-collapse-up' : 'glyphicon-collapse-down', 'glyphicon']"></span>
                    <h3>Taxon endpoints</h3>
                    <p>Endpoints accessing data for specific taxa. E.g: Taxon-specific genes or datasets</p>
                </div>

                <div id="taxaEndpoints" v-show="showTaxa">
                    <endpoint :name="'Taxa'"
                              :description="'List taxa filtered by given parameters'"
                              :response-description="RDTaxaAll"
                              :query-params="[]"
                              :path-params="[getTaxaParam()]"
                              :endpoint-url-base="'taxa/%%%1'">l
                    </endpoint>

                    <endpoint :name="'Taxon datasets'"
                              :description="'Retrieves datasets for the given taxon.'"
                              :response-description="RDTaxaDatasets"
                              :query-params="getDatasetsAllQueryParams()"
                              :path-params="[getTaxonParam()]"
                              :endpoint-url-base="'taxa/%%%1/datasets'">
                    </endpoint>

                    <endpoint :name="'Taxon phenotypes'"
                              :description="'Loads all phenotypes for the given taxon.'"
                              :response-description="RDTaxaPhenotypes"
                              :query-params="[getEditableParam(), getTreeParam()]"
                              :path-params="[getTaxonParam()]"
                              :endpoint-url-base="'taxa/%%%1/phenotypes'">
                    </endpoint>

                    <endpoint :name="'Taxon phenotypes candidate genes'"
                              :description="'Given a set of phenotypes, return all genes associated with them.'"
                              :response-description="RDTaxaCandidateGenes"
                              :query-params="[getEditableParam(), getPhenotypesParam()]"
                              :path-params="[getTaxonParam()]"
                              :endpoint-url-base="'taxa/%%%1/phenotypes/candidates'">
                    </endpoint>

                    <endpoint :name="'Gene on specific taxon'"
                              :description="'Retrieves genes matching the identifier on the given taxon.'"
                              :response-description="RDTaxaGene"
                              :query-params="[]"
                              :path-params="[getTaxonParam(), getGeneParam()]"
                              :endpoint-url-base="'taxa/%%%1/genes/%%%2'">
                    </endpoint>

                    <endpoint :name="'Gene evidence on specific taxon'"
                              :description="'Retrieves gene evidence for the gene on the given taxon.'"
                              :response-description="RDTaxaGeneEvidence"
                              :query-params="[]"
                              :path-params="[getTaxonParam(), getGeneParam()]"
                              :endpoint-url-base="'taxa/%%%1/genes/%%%2/evidence'">
                    </endpoint>

                    <endpoint :name="'Gene location on specific taxon'"
                              :description="'Retrieves gene evidence for the gene on the given taxon.'"
                              :response-description="RDTaxaGeneLocation"
                              :query-params="[]"
                              :path-params="[getTaxonParam(), getGeneParam()]"
                              :endpoint-url-base="'taxa/%%%1/genes/%%%2/locations'">
                    </endpoint>

                    <endpoint :name="'Genes at location'"
                              :description="'Finds genes overlapping a given region.'"
                              :response-description="RDTaxaGeneAtLoc"
                              :query-params="[getStrandParam(), getStartParam(), getSizeParam()]"
                              :path-params="[getTaxonParam(), getChromosomeParam()]"
                              :endpoint-url-base="'taxa/%%%1/chromosomes/%%%2/genes'">
                    </endpoint>
                </div>

                <hr>

                <!--
                    Other endpoints
                 -->

                <div class="container endpoints-group-title" v-on:click=" showOther = !showOther">
                <span
                    v-bind:class="[showOther ? 'glyphicon-collapse-up' : 'glyphicon-collapse-down', 'glyphicon']"></span>
                    <h3>Other endpoints</h3>
                    <p>Annotations, search, etc.</p>
                </div>

                <div id="otherEndpoints" v-show="showOther">

                    <endpoint :name="'Annotation search'"
                              :description="'Does a search for annotations based on the given string'"
                              :response-description="RDAnnotSearch"
                              :query-params="[]"
                              :path-params="[getSearchAnnotParam()]"
                              :endpoint-url-base="'annotations/search/%%%1'">
                    </endpoint>

                    <endpoint :name="'Evidence'"
                              :description="'Finds all evidence with the given external database name'"
                              :response-description="RDEvidence"
                              :query-params="getEvidenceQueryParams()"
                              :path-params="[]"
                              :endpoint-url-base="'phenotypes/evidence/'"
                    >
                    </endpoint>

                    <endpoint :name="'Dumps'"
                              :description="'Retrieves information about external data sources from Phenocarta, including URLs and timestamps of the most recent update dates/times'"
                              :response-description="RDDumps"
                              :query-params="[]"
                              :path-params="[]"
                              :endpoint-url-base="'phenotypes/dumps/'">
                    </endpoint>

                    <div class="row-pad"></div>

                </div>

            </div>

        </div>

        <footer>
            <div class="container">
                <div class="row">
                    <a id="footer"></a>
                    <div class="col-xs-4 text-center">
                        <a href="http://gemma.msl.ubc.ca" target="_blank" title="Gemma website">
                            <img class="whiten" src="img/gemmaLogo.png" height="96"></a>
                        <a href="https://pavlidislab.github.io/Gemma/" target="_blank" title="Gemma GitHub pages">
                            <img src="img/githubLogo.png" height="64"></a>
                    </div>
                    <div class="col-xs-4">
                        <h4>Gemma</h4>
                        <ul>
                            <li><a href="http://gemma.msl.ubc.ca" target="_blank">
                                Website</a></li>
                            <li><a href="https://pavlidislab.github.io/Gemma/" target="_blank">
                                End-user documentation </a></li>
                            <li><a href="http://gemma.msl.ubc.ca/resources/apidocs/" target="_blank">
                                Code documentation (javadoc)</a></li>
                            <li><a href="https://github.com/ppavlidis/Gemma" target="_blank">
                                GitHub project</a></li>
                            <li><a href="http://gemma.msl.ubc.ca/rest/v2/" target="_blank">
                                REST API Root</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-4">
                        <h4>Other links</h4>
                        <ul>
                            <li>
                                <a href="https://www.chibi.ubc.ca/faculty/paul-pavlidis/pavlidis-lab/" target="_blank">
                                    The lab
                                </a>
                            </li>
                            <li>
                                <a href="https://www.chibi.ubc.ca/faculty/paul-pavlidis/pavlidis-lab/software-and-resources/"
                                   target="_blank">
                                    Other software
                                </a>
                            </li>
                        </ul>
                        <h4>Contact</h4>
                        <a id="contact"></a>
                        <ul>
                            <li><a href="mailto:pavlab-support@msl.ubc.ca" target="_blank">Email</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <footer>
                <div class="container text-center">
                    <a href="http://www.ubc.ca/" target="_blank" title="UBC home page">
                        <h4>Copyright &copy; 2017 University of British Columbia</h4>
                        <img src="img/ubcLogo.png" height="100px">
                    </a>
                </div>
            </footer>
        </footer>

        <!-- Vue templates -->
        <script type="text/x-template" id="endpoint-template">
            <div class="endpoint">
                <div class="container">
                    <div class="header" v-on:click=" show= !show ">
                        <span
                            v-bind:class="[show ? 'glyphicon-collapse-up' : 'glyphicon-collapse-down', 'glyphicon']"></span>
                        <h4>{{ name }}</h4>
                        <span class="access-badge">
                            <span v-if="authAccess" class="glyphicon glyphicon-minus-sign access-auth"
                                  title="Authorized access only"></span>
                            <span v-if="adminAccess" class="glyphicon glyphicon-minus-sign access-admin"
                                  title="Admin access only"></span>
                        </span>
                        <span class="description">{{ description }}</span>
                    </div>
                    <div class="row apiRow is-flex" v-if="show">
                        <div class="col-sm-6">
                            <h5>Parameters:<span class="badge invisible"><span class="glyphicon">&#160;</span></span>
                            </h5>
                            <form v-on:submit.prevent="">
                                <div v-if="!hideParams" v-for="param in pathParams" class="param-row">
                                    <api-param :param="param"></api-param>
                                </div>

                                <div v-if="!hideParams" v-for="param in queryParams" class="param-row">
                                    <api-param :param="param"></api-param>
                                </div>

                                <div v-if="hideParams || (pathParams.length == 0 && queryParams.length == 0)"
                                     class="param-row">
                                    <span class="pre-like">No parameters</span>
                                </div>

                                <div class="pre-like">{{ completeUrl }}</div>

                                <button class="btn btn-primary" v-on:click="getResponse"
                                        title="Executes the call and displays the response in the response panel.">Call
                                    API
                                </button>
                                <a v-bind:href="completeUrl" class="btn" target="_blank"
                                   title="Calls the query in a new tab and lets your browser handle the response.
                                          Using the link won't pass the basic authentication credentials, but once you authenticate either through clicking the 'Call API', or though the Gemma webpage, the authenticated session should cover this link as well.">
                                    Open link <span class="glyphicon glyphicon-link"></span>
                                    <span class="glyphicon glyphicon-info-sign"></span>
                                </a>

                            </form>
                        </div>
                        <div class="col-sm-6 response-col">
                            <div class="response-header">
                                <h5>Response:
                                    <span v-if="status!=null" v-bind:class="[isError ? 'apiError' : 'apiOk', 'badge']"
                                          v-bind:title="statusMsg">
                                        {{ status }}
                                        <span v-if="status!=null"
                                              v-bind:class="[isError ? 'glyphicon-remove' : 'glyphicon-ok', 'glyphicon']">
                                        </span>
                                    </span>
                                    <span v-if="status!=null && jsonResponse" class="badge">
                                        JSON <span class="glyphicon glyphicon-file"></span>
                                    </span>
                                    <span v-if="status!=null && !jsonResponse" class="badge">
                                        FILE <span class="glyphicon glyphicon-file"></span>
                                    </span>
                                    <span class="badge invisible"><span class="glyphicon">&#160;</span></span>
                                </h5>
                            </div>

                            <div class="">
                                <button class="btn-response-desc" v-on:click=" showResponseInfo = !showResponseInfo "
                                        v-show="!showResponseInfo">
                                    <span class="glyphicon glyphicon-info-sign"></span>
                                    Show response description
                                </button>
                                <div class="pre-like" v-html="responseDescription" v-show="showResponseInfo"
                                     v-on:click=" showResponseInfo = !showResponseInfo "></div>
                            </div>

                            <pre v-if="loadingMsgFull != null" class="response">{{ loadingMsgFull }}</pre>
                            <tree-view v-else-if="jsonResponse" class="pre-like response" :data="response"
                                       :options="{maxDepth: 2, rootObjectKey: ''}"></tree-view>
                            <pre v-else class="response">{{ response }}</pre>
                        </div>
                    </div>
                </div>
            </div>
        </script>

        <script type="text/x-template" id="api-param-template">
            <div>
                <label hidden
                       v-bind:for="$parent.name.replace(/ /g,'') + '.' + param.name ">{{ param.name }}</label>

                <div class="input-group" v-bind:class="[param.required ? 'has-warning' : '' ]"
                     v-bind:title="param.required ? 'Required' : 'Optional' ">
                    <span class="input-group-addon">{{ param.name }} = </span>
                    <!--suppress HtmlFormInputWithoutLabel -->
                    <input class="form-control" v-model="param.value" v-on:change="$parent.computeUrl()"
                           v-bind:id="$parent.name.replace(/ /g,'') + '.' + param.name "
                           v-on:keyup="$parent.keyMonitor"
                           v-on:keypress.enter.prevent=""
                    >
                    <span class="input-group-btn">
                        <button class="btn btn-info" v-on:click=" showInfo = !showInfo ">
                            <span class="glyphicon glyphicon-info-sign"></span>
                        </button>
                    </span>
                </div>

                <div class="pre-like" v-if="showInfo" v-html="param.description"></div>
            </div>
        </script>

        <!-- Vue init -->
        <script src="js/vue/conf.js"></script>
        <script src="js/vue/descriptions.js"></script>
        <script src="js/vue/codeSamples.js"></script>
        <script src="https://vuejs.org/js/vue.min.js"></script>
        <!--<script src="https://unpkg.com/vue"></script>-->
        <script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js"></script>
        <script src="js/vendor/vue-json-tree-view.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/sha256.min.js"></script>
        <script src="js/vue/app.js"></script>
        <!-- Other scripts -->
        <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
        <script src="js/vendor/modernizr-3.5.0.min.js"></script>
        <script src="js/plugins.js"></script>


        <!--<script>-->
        <!--window.ga = function () {-->
        <!--ga.q.push(arguments)-->
        <!--};-->
        <!--ga.q = [];-->
        <!--ga.l = +new Date;-->
        <!--ga('create', 'UA-XXXXX-Y', 'auto');-->
        <!--ga('send', 'pageview')-->
        <!--</script>-->
        <!--<script src="https://www.google-analytics.com/analytics.js" async defer></script>-->
    </body>
</html>
