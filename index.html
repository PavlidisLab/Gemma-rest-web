<!doctype html>
<html class="no-js" lang="" xmlns:v-on="http://www.w3.org/1999/xhtml" xmlns:v-bind="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Gemma REST API interactive documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="manifest" href="site.webmanifest">
        <link rel="apple-touch-icon" href="icon.png">
        <!-- Place favicon.ico in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>

        <header>
            <!--[if lte IE 9]>
            <div class="modal-header browserUpgrade">
                <p>
                    You are using an <strong>outdated</strong> browser.
                    Please <a href="https://browsehappy.com/">upgrade your browser</a>
                    to improve your experience and security.
                </p>
            </div>
            <![endif]-->

            <div class="jumbotron">
                <div class="container">
                    <h1>Gemma REST&#160;API interactive documentation</h1>
                </div>
            </div>
        </header>

        <div id="mainContent">
            <div class="container welcome">
                <h3>Welcome</h3>
                <p>Here you can find description of each endpoint and its parameters, make calls to the api and see
                    the responses as a formatted json text.</p>
                <p>The documentation of the underlying java code can be found <a
                    href="http://www.chibi.ubc.ca/Gemma/resources/apidocs/ubic/gemma/web/services/rest/package-summary.html">here</a>.
                </p>
                <p>Click on the endpoint name to see its interface and parameter description.</p>
            </div>

            <hr>

            <div class="container">
                <h2>Datasets</h2>
            </div>


            <endpoint :name="'All datasets'"
                      :description="'List all datasets'"
                      :query-params="getDatasetsAllQueryParams()"
                      :path-params="[]"
                      :endpoint-url-base="'datasets/'">
            </endpoint>

            <endpoint :name="'Specific dataset'"
                      :description="'Retrieves single dataset based on the given dataset identifier'"
                      :query-params="[]"
                      :path-params="[getDatasetParam()]"
                      :endpoint-url-base="'datasets/%1/'">
            </endpoint>

            <endpoint :name="'Dataset platforms'"
                      :description="'Retrieves platforms for the given dataset'"
                      :query-params="[]"
                      :path-params="[getDatasetParam()]"
                      :endpoint-url-base="'datasets/%1/platforms'">
            </endpoint>

            <endpoint :name="'Dataset samples'"
                      :description="'Retrieves samples for the given dataset'"
                      :query-params="[]"
                      :path-params="[getDatasetParam()]"
                      :endpoint-url-base="'datasets/%1/samples'">
            </endpoint>

            <endpoint :name="'Dataset differential analysis'"
                      :description="'Retrieves the differential analysis results for the given dataset'"
                      :query-params="getDatasetsDiffAnalQueryParams()"
                      :path-params="[getDatasetParam()]"
                      :endpoint-url-base="'datasets/%1/analyses/differential'">
            </endpoint>

            <endpoint :name="'Dataset annotations'"
                      :description="'Retrieves the annotations for the given dataset'"
                      :query-params="[]"
                      :path-params="[getDatasetParam()]"
                      :endpoint-url-base="'datasets/%1/annotations'">
            </endpoint>

            <endpoint :name="'Dataset data'"
                      :description="'Retrieves the data for the given dataset'"
                      :query-params="getDatasetsDataQueryParams()"
                      :path-params="[getDatasetParam()]"
                      :endpoint-url-base="'datasets/%1/data'">
            </endpoint>

            <endpoint :name="'Dataset design'"
                      :description="'Retrieves the design for the given dataset'"
                      :query-params="[]"
                      :path-params="[getDatasetParam()]"
                      :endpoint-url-base="'datasets/%1/design'">
            </endpoint>

            <div class="rowPad"></div>

            <hr>

            <div class="container">
                <h2>Platforms</h2>
            </div>


            <endpoint :name="'All platforms'"
                      :description="'List all platforms'"
                      :query-params="getDatasetsAllQueryParams()"
                      :path-params="[]"
                      :endpoint-url-base="'platforms/'">
            </endpoint>

            <endpoint :name="'Specific platform'"
                      :description="'Retrieves single platform based on the given dataset identifier'"
                      :query-params="[]"
                      :path-params="[getPlatformParam()]"
                      :endpoint-url-base="'platforms/%1/'">
            </endpoint>

            <endpoint :name="'Platform datasets'"
                      :description="'Retrieves experiments in the given platform'"
                      :query-params="getOffsetLimitQueryParams()"
                      :path-params="[getPlatformParam()]"
                      :endpoint-url-base="'platforms/%1/datasets'">
            </endpoint>

            <endpoint :name="'Platform elements'"
                      :description="'Retrieves the composite sequences (elements) for the given platform'"
                      :query-params="getOffsetLimitQueryParams()"
                      :path-params="[getPlatformParam()]"
                      :endpoint-url-base="'platforms/%1/elements'">
            </endpoint>

            <endpoint :name="'Specific element on a platform'"
                      :description="'Retrieves a specific composite sequence (element) for the given platform'"
                      :query-params="[]"
                      :path-params="getPlatformsElementPathParams()"
                      :endpoint-url-base="'platforms/%1/elements/%2/'">
            </endpoint>

            <div class="rowPad"></div>

        </div>

        <footer>
            <div class="container">
                <p>Copyright &copy; 2017 University of British Columbia</p>
            </div>
        </footer>

        <!-- Vue templates -->
        <script type="text/x-template" id="endpoint-template">
            <div class="endpoint">
                <div class="container">
                    <button class="btn btn-toolbar" v-on:click=" show= !show "><span
                        class="glyphicon glyphicon-circle-arrow-down"></span> {{ name }}
                    </button>
                    {{ description }}
                    <div class="row apiRow is-flex" v-if="show">
                        <div class="col-sm-6">
                            <h4>Parameters:<span class="badge invisible" ><span class="glyphicon">&#160;</span></span></h4>
                            <form v-on:submit.prevent="">
                                <div v-for="param in pathParams" class="paramRow">
                                    <api-param :param="param"></api-param>
                                </div>

                                <div v-for="param in queryParams" class="paramRow">
                                    <api-param :param="param"></api-param>
                                </div>

                                <div class="preLike">{{ completeUrl }}</div>

                                <button class="btn btn-primary" v-on:click="getResponse">Call API</button>
                            </form>
                        </div>
                        <div class="col-sm-6 responseCol">
                            <div class="response">
                                <h4>Response:
                                    <span v-if="status!=null" v-bind:class="[isError ? 'apiError' : 'apiOk', 'badge']"
                                          title="Response status code">
                                        {{ status }}
                                        <span v-if="status!=null"
                                              v-bind:class="[isError ? 'glyphicon-remove' : 'glyphicon-ok', 'glyphicon']">
                                        </span>
                                    </span>
                                    <a v-if="rawResponse!=null" v-bind:href="completeUrl" target="_blank">
                                        <span class="badge" title="Re-runs the call in a new panel.">
                                            link <span class="glyphicon glyphicon-link"></span>
                                        </span>
                                    </a>
                                    <span class="badge invisible"><span class="glyphicon">&#160;</span></span>
                                </h4>
                            </div>
                            <pre v-if="loadingMsgFull != null" class="response">{{ loadingMsgFull }}</pre>
                            <pre v-else class="response">{{ response }}</pre>
                        </div>
                    </div>
                </div>
            </div>
        </script>

        <script type="text/x-template" id="api-param-template">
            <div>
                <label hidden
                       v-bind:for="$parent.name.replace(/ /g,'') + '.' + param.name ">{{ param.name }}</label>

                <div class="input-group" v-bind:class="[param.required ? 'has-warning' : '' ]"
                     v-bind:title="param.required ? 'Required' : 'Optional' ">
                    <span class="input-group-addon">{{ param.name }} = </span>
                    <!--suppress HtmlFormInputWithoutLabel -->
                    <input class="form-control" v-model="param.value" v-on:change="$parent.computeUrl()"
                           v-bind:id="$parent.name.replace(/ /g,'') + '.' + param.name "
                    >
                    <span class="input-group-btn">
                        <button class="btn btn-info" v-on:click=" showInfo = !showInfo ">
                            <span class="glyphicon glyphicon-info-sign"></span>
                        </button>
                    </span>
                </div>

                <div class="preLike" v-if="showInfo" v-html="param.description"></div>
            </div>
        </script>

        <!-- Vue init -->
        <script src="js/vue/descriptions.js"></script>
        <!-- TODO change for production -->
        <!--<script src="https://unpkg.com/min"></script>-->
        <script src="https://unpkg.com/vue"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js"></script>
        <script src="js/vue/app.js"></script>
        <!-- Other scripts -->
        <script src="js/vendor/modernizr-3.5.0.min.js"></script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>
        <!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
        <script>
            window.ga = function () {
                ga.q.push(arguments)
            };
            ga.q = [];
            ga.l = +new Date;
            ga('create', 'UA-XXXXX-Y', 'auto');
            ga('send', 'pageview')
        </script>
        <script src="https://www.google-analytics.com/analytics.js" async defer></script>
    </body>
</html>
